---
title: Configuration
description: Environment variables and configuration options for Oore
banner:
  content: |
    This project is under active development. Some features may be incomplete.
---

import { Tabs, TabItem } from '@astrojs/starlight/components';

Oore is configured through environment variables. These can be set in a `.env` file or passed directly to the process.

## Environment File Locations

| Context | Location |
|---------|----------|
| Development | `.env` in working directory |
| Installed Service | `/etc/oore/oore.env` |
| Custom | `--env-file` flag or `OORE_ENV_FILE` variable |

## Configuration Variables

### Database

| Variable | Required | Default | Description |
|----------|----------|---------|-------------|
| `DATABASE_URL` | Yes | - | SQLite connection string |

<Tabs>
  <TabItem label="Development">
    ```bash
    DATABASE_URL=sqlite:oore.db
    ```
  </TabItem>
  <TabItem label="Production">
    ```bash
    DATABASE_URL=sqlite:/var/lib/oore/oore.db
    ```
  </TabItem>
</Tabs>

### Server

| Variable | Required | Default | Description |
|----------|----------|---------|-------------|
| `OORE_BASE_URL` | No | `http://localhost:8080` | Public URL for webhook callbacks |
| `OORE_DEV_MODE` | No | `false` | Enable development mode (allows HTTP for non-localhost) |

:::note
The server currently binds to `0.0.0.0:8080`. Host and port are not yet configurable via environment variables.
:::

```bash
OORE_BASE_URL=https://ci.example.com
OORE_DEV_MODE=false
```

### Security

| Variable | Required | Default | Description |
|----------|----------|---------|-------------|
| `OORE_ADMIN_TOKEN` | No | - | Token for admin API authentication |
| `ENCRYPTION_KEY` | No | - | 32-byte hex key for encrypting credentials |

:::tip
Generate an encryption key with:
```bash
openssl rand -hex 32
```
:::

### CORS

| Variable | Required | Default | Description |
|----------|----------|---------|-------------|
| `OORE_DASHBOARD_ORIGIN` | No | - | Allowed origin for CORS (web dashboard) |

### Logging

| Variable | Required | Default | Description |
|----------|----------|---------|-------------|
| `RUST_LOG` | No | `info` | Log level filter |

**Log levels:** `error`, `warn`, `info`, `debug`, `trace`

<Tabs>
  <TabItem label="Production">
    ```bash
    RUST_LOG=oore_server=info,oore_core=info
    ```
  </TabItem>
  <TabItem label="Debug">
    ```bash
    RUST_LOG=oore_server=debug,oore_core=debug
    ```
  </TabItem>
</Tabs>

### GitHub Integration

:::tip[Recommended: Use CLI Setup]
The recommended way to configure GitHub is using `oore github setup`, which stores credentials encrypted in the database. No environment variables needed!

See [GitHub Integration](/integrations/github/) for the complete setup guide.
:::

**Environment variables (legacy/alternative):**

These are only needed if you're manually configuring a pre-existing GitHub App instead of using the CLI setup flow:

| Variable | Required | Default | Description |
|----------|----------|---------|-------------|
| `GITHUB_APP_ID` | No | - | GitHub App ID |
| `GITHUB_PRIVATE_KEY_PATH` | No | - | Path to GitHub App private key PEM file |
| `GITHUB_WEBHOOK_SECRET` | No | - | Shared secret for webhook verification |

:::caution
All three variables must be set together. Partial configuration will cause an error.
:::

### GitLab Integration

| Variable | Required | Default | Description |
|----------|----------|---------|-------------|
| `GITLAB_SERVER_PEPPER` | No | - | Server pepper for HMAC computation of webhook tokens |
| `GITLAB_API_BASE_URL` | No | `https://gitlab.com` | Base URL for GitLab API |

**OAuth Configuration (for gitlab.com):**

| Variable | Required | Default | Description |
|----------|----------|---------|-------------|
| `OORE_GITLAB_CLIENT_ID` | No | - | GitLab OAuth application ID |
| `OORE_GITLAB_CLIENT_SECRET` | No | - | GitLab OAuth application secret |

**Self-Hosted GitLab Security (optional):**

| Variable | Required | Default | Description |
|----------|----------|---------|-------------|
| `OORE_GITLAB_ALLOWED_HOSTS` | No | - | Comma-separated list of allowed GitLab hostnames |
| `OORE_GITLAB_ALLOWED_CIDRS` | No | - | Comma-separated list of allowed CIDRs |
| `OORE_ALLOW_BROAD_CIDRS` | No | `false` | Allow broad CIDR ranges (use with caution) |
| `OORE_GITLAB_CA_BUNDLE` | No | - | Path to custom CA bundle for self-signed certificates |

GitLab webhook tokens are stored per-repository in the database as HMAC hashes.

## Example Configurations

### Minimal Development

```bash title=".env"
DATABASE_URL=sqlite:oore.db
RUST_LOG=debug
```

### Production

```bash title="/etc/oore/oore.env"
DATABASE_URL=sqlite:/var/lib/oore/oore.db
OORE_BASE_URL=https://ci.example.com
OORE_ADMIN_TOKEN=secure-random-token-32-chars-min
ENCRYPTION_KEY=64-hex-characters-here
OORE_DASHBOARD_ORIGIN=https://dashboard.example.com
RUST_LOG=oore_server=info,oore_core=info
```

### With GitHub App (CLI Setup - Recommended)

```bash title="/etc/oore/oore.env"
DATABASE_URL=sqlite:/var/lib/oore/oore.db
OORE_BASE_URL=https://ci.example.com
OORE_ADMIN_TOKEN=secure-random-token-here
ENCRYPTION_KEY=64-hex-characters-here
RUST_LOG=oore_server=info
```

Then run `oore github setup` to configure the GitHub App. Credentials are stored encrypted in the database.

### With GitLab OAuth

```bash title="/etc/oore/oore.env"
DATABASE_URL=sqlite:/var/lib/oore/oore.db
OORE_BASE_URL=https://ci.example.com
OORE_ADMIN_TOKEN=secure-random-token-here
ENCRYPTION_KEY=64-hex-characters-here

GITLAB_SERVER_PEPPER=random-pepper-for-hmac
OORE_GITLAB_CLIENT_ID=your-gitlab-app-id
OORE_GITLAB_CLIENT_SECRET=your-gitlab-app-secret

RUST_LOG=oore_server=info
```

## File Permissions

:::caution
The environment file contains secrets and should only be readable by root.
:::

```bash
sudo chmod 600 /etc/oore/oore.env
sudo chown root:wheel /etc/oore/oore.env  # macOS
sudo chown root:root /etc/oore/oore.env   # Linux
```

This is done automatically by `oored install`.

## Applying Changes

<Tabs>
  <TabItem label="Installed Service">
    ```bash
    sudo oored restart
    ```
  </TabItem>
  <TabItem label="Development">
    Restart the server (Ctrl+C and run again)
  </TabItem>
</Tabs>
